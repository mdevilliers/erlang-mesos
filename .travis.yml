language: erlang
otp_release:
    - 17.5
    - 18.0
sudo: false
#  
# 1. install mesos 
# 2. upgrade gcc 4.8 - Travis runs an older version (4.6) by default
# 3. start the mesos master and slave services
# 4. download and build protobuffer 2.5 - known issue with Travis
# 
before_install: 
    - apt-key adv --keyserver keyserver.ubuntu.com --recv E56151BF
    - add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - DISTRO=$(lsb_release -is | tr '[:upper:]' '[:lower:]')
    - CODENAME=$(lsb_release -cs)
    - echo "deb http://repos.mesosphere.io/${DISTRO} ${CODENAME} main" | tee /etc/apt/sources.list.d/mesosphere.list
    - apt-get -y update	
    - apt-get -y install mesos g++-4.8
    - export CXX="g++-4.8" CC="gcc-4.8"
    - service mesos-master start
    - service mesos-slave start
    - wget http://protobuf.googlecode.com/files/protobuf-2.5.0.tar.gz
    - tar xzvf protobuf-2.5.0.tar.gz
    - cd protobuf-2.5.0 && ./configure && make && make install && cd ..
